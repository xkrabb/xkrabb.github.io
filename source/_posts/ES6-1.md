title: let和const声明--笔记
date: 2017-02-09 16:52:43
tags: [ES6, 笔记]
---

### let声明

* `let`声明具有局部作用域，在`{}`内有效

* 用在`for`循环中能避免过程中变量输出总是最后一个值问题，**注意**：`for`循环的`{}`是循环体内的一个单独子作用域。

* `let`声明不存在变量提升，声明前使用会报错

* 暂时性死区（TDZ），如果区块中有`let`或`const`，区块将是一个封闭作用域。声明前使用就会报错，不管父作用域是否有声明。（babel不报错）

* 不允许重复声明

<!-- more -->


### 块级作用域

* ES6允许任意嵌套

* ES6允许在块级作用域内声明函数，规范在不同浏览器实现不同，避免出错，尽量使用函数表达式，而不是函数声明

* 提案`do`将块级作用域内的值传递到外部

```
// x会得到整个块级作用域返回值
let x = do {
  let t = f();
  t * t + 1;
};
```

### const声明

* 声明一个常量，常量的值不能改变，同`let`有作用域限制，有TDZ，声明不会提升，不能重复声明。

* `const`声明的是一个符合类型变量，则只能保证数据所在地址不变，不能保证地址数据不变。需要冻结使用`const foo = Object.freeze({});`如果对象属性也要冻结，则需要遍历对象属性操作

### 顶层对象属性

* 浏览器是`window`对象，Node是`global`对象， web worker是`self`对象，es6开始区分顶层对象和全局对象

* 提案将`global`作为所有情况的顶层对象，通过`system.global`模块实现








